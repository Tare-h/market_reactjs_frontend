function selectSingleSizeProduct(){1==$("#level2 input").not(".outofstock").length&&$("#level2 input").not(".outofstock").click()}function setStdSelected(){0<$("#sizeDiv .standart").length?$("#sizeDiv .standart").not(".outofstock").parent().trigger("change"):$("#grpSize").removeClass("hidden")}function addLastWarn(){var t;$("#grpSize").find(".warn-box").remove(),$("#level2 input[available='1'].js-lastitems").length<=2&&0===$("#level2 input[available='1']").not(".js-lastitems").length&&(t=0,$("#level2 input[available='1'].js-lastitems").each(function(){var e=$(this).attr("data-stockleft");t+=parseInt(e)}),t<3&&($(".warn-box").length||$("#grpSize").append('<div class="col-xs-12 col-md-4 warn-box"><div class="last-warn animated animate-flash delay-1s"><span class="icontype ui-timer"><svg class="fill-red" height="17" role="img" title="Tükenmek Üzere" viewBox="0 0 15 17" width="15"><use xlink:href="/Content/sprites/morhipo-icons.svg?v='+$core.getVersImg()+'#ui-timer"></use></svg></span> Son <strong>'+t+" Adet!</strong></div></div>")),0===t&&$(".last-warn").hide())}function addToCart(e){var t=!0;return $core.showOnProgress("#add-to-basket"),0==$("#sizeDiv .standart").length&&0==$("#level2 input:checked").length?($("#level2").addClass("size-error"),$("#level2").val("-1"),t=!1):$("#level2").removeClass("size-error"),$("#sizeDiv").find("label.error").remove(),$("#level2").hasClass("size-error")&&($("#level2").attr("data-msg-required"),$("#size .label-txt").text($("#level2").attr("data-msg-required")),$("#size").addClass("error"),$.scrollTo(".error",200)),0<$("#sizeDiv .standart").length&&$("#sizeDiv .standart").hasClass("outofstock")?($core.alert("Seçmiş olduğunuz ürüne ait stok bulunmamaktadır."),$core.hideOnProgress("#add-to-basket")):t?$business.addToBasket(!1,e):$core.hideOnProgress("#add-to-basket"),!1}!function(e){var p=e,h=p.$,m={level:[],filter:{},basketctr:{},piecesctr:{},picturesctr:void 0,pricesctr:void 0,addtobasketctr:void 0,business:{},supplyinfoctr:{},maxprodqtyctr:{},defaultPropertyValueID:0,isLightBox:0,colorContainer:void 0,sizeContainer:void 0,productJson:[]};h.fn.extendOptions=function(e){h.extend(m,e)},h.fn.ProdetailFilter=function(e){e&&h.extend(m,e);h(this);var r=[],d=m.productJson,c=m.level.length;h(m.basketctr).addClass("disabled");var o={productID:0,productObj:null,quantity:0,listingID:0,merchantCode:0,validate:function(){if(p.basketContext.quantity=+h("select#amount").val(),p.basketContext.productID)return!!p.basketContext.quantity||(m.business.alert("Lütfen adet seçiniz!"),!1);for(var e=1,t=m.level.length;e<t;e++)if(!r[e]){m.business.alert("Lütfen "+m.level[e].n.toLowerCase()+" seçiniz !");break}return!1}};p.basketContext=o;function i(e){var t=+h(e).attr("level"),i=+h(e).attr("value");if(r[t]=i,1<=t)for(var s=m.level[t].v,o=0,l=s.length,o=0;o<l;o++){var n,a=s[o];a.id===i&&(n=a.pid,1==t?h(e).hasClass("outofstock")?h("div#product-price").hide():(clientContext.CampID||clientContext.currentCampaign?(clientContext.currentCampaign&&(clientContext.CampID=clientContext.currentCampaign),m.business.updatePrivateProductPriceAndStockStatus(n,clientContext.CampID,d[0].merchantCode)):m.business.updateSeasonProductPriceAndStockStatus(n,d[0].merchantCode),h("div#product-price").show()):2==t&&(h(e).hasClass("outofstock")?h("div#product-price").hide():(n=m.filter[h(".color-section input:checked").val()][i].id,clientContext.CampID||clientContext.currentCampaign?(clientContext.currentCampaign&&(clientContext.CampID=clientContext.currentCampaign),m.business.getProductPricesByProductIDAndCampID(n,clientContext.CampID,d[0].merchantCode)):m.business.getProductPricesByProductID(n,d[0].merchantCode),h("div#product-price").show())))}u(),function(){for(var e,t=1;t<c;t++){var i=r[t];if(!i)return p.basketContext.productID=0,p.basketContext.listingID=0,p.basketContext.merchantCode=0;e=e?e[i]:m.filter[i]}e?(p.basketContext.productID=e.id,p.basketContext.listingID=e.lid,p.basketContext.merchantCode=e.mrcid,d.length&&(p.basketContext.productObj=d[0],d[0].id=e.id,d[0].listingID=e.lid,d[0].merchantCode=e.mrcid,d[0].name=$core.splitTextAndReplaceNthItem(d[0].name,"|",1,e.id)),e.ddi&&e.ddv?(h(m.supplyinfoctr).html(v(e.ddi,e.ddo,e.ddv,e.qc)),h(m.supplyinfoctr).css("display","block")):h(m.supplyinfoctr).html(""),e.qnt&&h(m.maxprodqtyctr).html("Bu üründen <b>"+e.qnt+"</b> adet satın alabilirsiniz.")):(p.basketContext.productID=0,p.basketContext.listingID=0,p.basketContext.merchantCode=0)}(),clientContext.productJson=d}var v=function(e,t,i,s,o){var l='<div class="row"><div class="col-xs-12 col-xs-offset-0 col-sm-10 col-sm-offset-0 col-md-8">',n="",a="";return s?(n='<span class="fast-cargo"><strong class="text-success">Hızlı Gönderi&nbsp;</strong></span>',d.length&&(d[0].dimension17="Hızlı Kargo")):(a="<strong>Tahmini Teslimat Tarihi&nbsp;</strong>",d.length&&(d[0].dimension17="Normal Kargo")),l+='<div class="delivery-date text-center">'+n+a+e+" - "+i+"</div>",l+="</div></div>"},u=function(){var a,e=h("#colorDiv .color-section,#sizeDiv .size-section");h(e).each(function(e){var t,i,s,o,l,n=+h(this).attr("level");n&&((t=r[n-1])&&(i=h("#sizeDiv input"),a=a?a[t]:m.filter[t],h(i).each(function(){var e,t=h(this).attr("value");t&&(!a||!a[t]||void 0!==a[t].qnt&&0===a[t].qnt?(r[n]===t&&(r[n]=void 0),h(this).removeClass("outofstock").addClass("outofstock"),h(this).attr("available","0"),h(this).attr({disabled:"disabled"}),h(this).next().attr({role:"button",tabindex:"0","data-toggle":"popover"}),h(this).siblings("span").find(".size-last").remove()):(h(this).removeClass("outofstock"),h(this).attr("available","1"),h(this).removeAttr("disabled"),h(this).next().removeAttr("role tabindex data-toggle"),h(this).siblings("span").find(".size-last").remove(),e=a[t].qnt<=2?"Son "+a[t].qnt:"",a[t].qnt<=2?(h(this).attr("data-stockleft",a[t].qnt),h(this).addClass("js-lastitems"),h(this).siblings("span").find(".size-last").length||h(this).siblings("span").append('<div class="size-last">'+e+"</div>")):(h(this).removeAttr("data-stockleft"),h(this).removeClass("js-lastitems"))),a[t]?h(this).parent().removeClass("hidden"):h(this).parent().addClass("hidden"))})),s=n,o=h("input",".size-section"),l=h("input",".color-section"),h(l).each(function(e){var t=+h(this).attr("value");"1"==h(this).attr("level")&&t===r[s]&&(h(this).prop("checked",!0),h(".js-singleClr").html(h("input:checked",h(".color-section")).data("merchcolor")),d.length&&(d[0].variant=h("input:checked",h(this).parent()).attr("data-merchcolor")))}),h(o).each(function(e){var t=+h(this).attr("value");t&&"2"==h(this).attr("level")&&t===r[s]&&"1"==h(this).attr("available")&&(h(this).prop("checked",!0),d.length&&(d[0].dimension16=h(this).attr("stocksize")))}))}),h('[available="0"] ~ .size-slt-box').popover({placement:"bottom",html:!0,content:function(){return h(".no-stock-size").html(h(this).text()),h(".no-stock-popover").html()},close:!0,container:"body"}),h(':not([available="0"]) ~ .size-slt-box').popover("destroy")};(function(){for(var e,t,i=0,s=0,i=1;i<c;i++){var o=m.level[i];if("Renk"===o.ui)for(e=o.v.length,h(m.colorContainer).append('<div class="color-section" level="1" role="radiogroup" aria-labelledby="color-selection"></div>'),s=0;s<e;s++){var l=(t=o.v[s]).n,n=(t.cn,t.mpath);h(".color-section").append("<label class='color-item' title='"+l+"'  aria-label='"+l+"'><input type='radio' name='color-select' level='"+i+"' value='"+t.id+"' data-merchColor='"+l+"'><img src='"+n+"' alt='"+l+"' class='color-img' /></label>")}else for(h(m.sizeContainer).append('<div class="size-section" id="level'+i+'" level="'+i+'" data-msg-required="Beden seçimi yapınız" data-rule-required="true"  role="radiogroup" aria-labelledby="size"></div>'),e=o.v.length,s=0;s<e;s++)t=o.v[s],h(".size-section").append("<label class='size-item "+t.n.toLowerCase()+"' title='"+t.n+"' aria-label='"+t.n+" Beden'><input type='radio' name='size-select' level='"+i+"' value='"+t.id+"' stockSize = '"+t.n+"'><span class='size-slt-box' level='"+i+"' value='"+t.id+"' name='"+t.n+"'>"+t.n+"</span></label>")}})(),function(){if(o.sizeID=0,o.productID=0,o.quantity=0,o.listingID=0,o.merchantCode=0,m.defaultPropertyValueID&&(r[1]=m.defaultPropertyValueID),u(),2<c)for(j=0;j<m.level[1].v.length;j++)for(k=0;k<m.level[2].v.length;k++){var e=null!=m.filter[m.level[1].v[j].id][m.level[2].v[k].id]?m.filter[m.level[1].v[j].id][m.level[2].v[k].id].ddi:"",t=null!=m.filter[m.level[1].v[j].id][m.level[2].v[k].id]?m.filter[m.level[1].v[j].id][m.level[2].v[k].id].ddo:"",i=null!=m.filter[m.level[1].v[j].id][m.level[2].v[k].id]?m.filter[m.level[1].v[j].id][m.level[2].v[k].id].ddv:"",s=null!=m.filter[m.level[1].v[j].id][m.level[2].v[k].id]?m.filter[m.level[1].v[j].id][m.level[2].v[k].id].qc:"";if(""!=e&&""!=t)return h(m.supplyinfoctr).html(v(e,t,i,s)),h(m.supplyinfoctr).css("display","block")}}(),h("body").on("show.bs.popover",function(e){h(e.target).hasClass("size-slt-box")&&(h("body").append('<div class="popover-overlay"></div>'),h(e.target).css("z-index","100"))}),h("body").on("hidden.bs.popover",function(e){h(e.target).hasClass("size-slt-box")&&(h(".popover-overlay").remove(),h(e.target).css("z-index","0"))});function t(){h("#level2 input").prop("checked",!1),h("#level2").removeClass("size-error").val("-1"),h("#size .label-txt").text("Beden:"),h("#size").removeClass("error"),i(h("input:checked",h(".color-section"))),h(".js-singleClr").html(h("input:checked",h(".color-section")).data("merchcolor")),1<h("#level2 input:not(:disabled)").not(".outofstock").length&&h("#level2 input").prop("checked",!1),setStdSelected(),selectSingleSizeProduct(),addLastWarn()}function s(){i(h("input:checked",h(".size-section"))),h(".size-section").removeClass("size-error"),h("#size").removeClass("error");var e=h("input:checked",h(".size-section")).attr("available"),t=h("input:checked",h(".size-section")).attr("stockSize");h("#size .label-txt").html('Beden: <span class="pd-size">'+t+"</span>"),0==e&&(h("#add-to-basket").hide(),h(".js-outofstock").show(),h(".js-btn-nostock").html(t+" Beden Tükenmiştir"),h("#productselectForm").submit(function(e){e.preventDefault()}),h(".hidden-buydetails").hide()),0!=e&&(h(".js-outofstock").hide(),h("#add-to-basket").show()),1==e&&(h(".js-outofstock").hide(),h("#add-to-basket").show(),h(".hidden-buydetails").show())}h(".color-section input").unbind("change",t),h(".size-section input").unbind("change",s),h(".color-section input").bind("change",t),h(".size-section input").bind("change",s)}}(window),$(document).ready(function(){$("#aboutprodtab").collapse(),5<$("#carousel .slides li").length&&$(".move-down").removeClass("disabled"),$("#carousel .slides").slimScroll({size:0}).bind("slimscrolling",function(e,t){0==t?$(".move-up").addClass("disabled"):0!=t&&$(".move-up").removeClass("disabled")}),$(".move-up").click(function(){$("#carousel .slides").slimScroll({scrollBy:"-145px"}),$(".move-down").removeClass("disabled")}),$(".move-down").click(function(){$("#carousel .slides").slimScroll({scrollBy:"145px"})}),setStdSelected(),selectSingleSizeProduct(),addLastWarn(),$business.LastViewedProductWidget(),gerisay({seconds:$("#timerID").data("tick"),element:"#timerID",endMessage:"Süre Doldu"}),1==MobileEsp.DetectTierIphone()&&$("#aboutprodtab").collapse()}),$("#carousel .slides").bind("slimscroll",function(e,t){"bottom"==t&&$(".move-down").addClass("disabled"),"bottom"!=t&&$(".move-down").removeClass("disabled")}),$("#product_tabs-accordion .panel-heading").click(function(){1==MobileEsp.DetectTierIphone()&&$("html, body").animate({scrollTop:$(".tabdetails-container").offset().top},"fast")}),$(".btn-share").click(function(){$("#share-modal").modal("show")}),$("body").on("click",".btn-all-comments, .comment-dt-link",function(){$.scrollTo(".all-comments",200)});